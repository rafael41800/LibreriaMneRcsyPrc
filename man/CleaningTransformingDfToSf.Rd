% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/01_CleaningTransformingDfToSf_function.R
\name{CleaningTransformingDfToSf}
\alias{CleaningTransformingDfToSf}
\title{Preparacion y limpieza de datos para analisis geoespacial / Data Preparation and Cleaning for Geospatial Analysis}
\usage{
CleaningTransformingDfToSf(
  DataFrame,
  SpatialReference,
  latitude = 0,
  variables
)
}
\arguments{
\item{DataFrame}{\code{data.frame} con los datos a procesar. Debe contener las columnas
\code{longitud}, \code{latitud} y \code{especie}.
/ \code{data.frame} with data to process. Must contain columns
\code{longitud}, \code{latitud}, and \code{especie}.}

\item{SpatialReference}{Objeto espacial (\code{sf} o \code{sfc}) que define la referencia
espacial de destino y area de recorte.
/ Spatial object (\code{sf} or \code{sfc}) defining the target spatial reference
and clipping area.}

\item{latitude}{Valor numerico que define el limite minimo de latitud para
filtrar observaciones. Por defecto es 0 (ecuador).
/ Numeric value defining the minimum latitude threshold for
filtering observations. Default is 0 (equator).}

\item{variables}{Vector de caracteres con los nombres de las columnas a
conservar en el resultado.
/ Character vector with column names to
retain in the output.}
}
\value{
Un objeto \code{sf} con las siguientes caracteristicas:
\itemize{
\item Geometrias en el sistema de referencia de \code{SpatialReference}
\item Variables seleccionadas mediante el parametro \code{variables}
\item Columna adicional \code{espcvld} con el conteo de observaciones por especie
\item Sin duplicados espaciales (mismas coordenadas y misma especie)
\item Recortado al area definida por \code{SpatialReference}
\item Observaciones al norte de \code{latitude}
\item /
\itemize{
\item An \code{sf} object with the following features:
\item Geometries in the coordinate reference system of \code{SpatialReference}
}
\item Variables selected through the \code{variables} parameter
\item Additional column \code{espcvld} with observation count per species
\item No spatial duplicates (same coordinates and same species)
\item Clipped to the area defined by \code{SpatialReference}
\item Observations north of \code{latitude}
\item 
}
}
\description{
Transforma un data.frame con coordenadas en un objeto \code{sf} (Simple Features)
listo para analisis espacial, aplicando filtros, transformaciones de CRS,
recorte y eliminacion de duplicados.
/
Transforms a data.frame with coordinates into an \code{sf} (Simple Features) object
ready for spatial analysis, applying filters, CRS transformations,
clipping, and duplicate removal.
}
\details{
La funcion ejecuta el siguiente pipeline de procesamiento:
\enumerate{
\item \strong{Filtrado}: Conserva observaciones con \code{latitud >= latitude}
\item \strong{Seleccion}: Mantiene solo las variables especificadas en \code{variables}
\item \strong{Conversion a \code{sf}}: Crea geometrias puntuales desde coordenadas
geograficas (CRS: WGS84, EPSG:4326)
\item \strong{Transformacion CRS}: Proyecta al sistema de coordenadas de
\code{SpatialReference}
\item \strong{Recorte}: Intersecta con el area de \code{SpatialReference}
\item \strong{Deduplicacion}: Elimina puntos con mismas coordenadas y especie
\item \strong{Conteo}: Agrega columna \code{espcvld} con frecuencia por especie
/
The function executes the following processing pipeline:
\item \strong{Filtering}: Keeps observations with \code{latitud >= latitude}
\item \strong{Selection}: Retains only variables specified in \code{variables}
\item \strong{Conversion to \code{sf}}: Creates point geometries from geographic
coordinates (CRS: WGS84, EPSG:4326)
\item \strong{CRS Transformation}: Projects to the coordinate system of
\code{SpatialReference}
\item \strong{Clipping}: Intersects with the area of \code{SpatialReference}
\item \strong{Deduplication}: Removes points with same coordinates and species
\item \strong{Counting}: Adds column \code{espcvld} with frequency per species
}
}
\note{
\itemize{
\item La columna \code{especie} debe estar presente aunque no se incluya en \code{variables}
\item La deduplicacion se basa en coordenadas transformadas (no originales)
\item Se crea un directorio temporal \verb{~/temp} para manejo de datos raster si es necesario
\item La funcion asume que las coordenadas estan en grados decimales (WGS84)
/
\item The \code{especie} column must be present even if not included in \code{variables}
\item Deduplication is based on transformed coordinates (not originals)
\item A temporary directory \verb{~/temp} is created for raster data handling if needed
\item The function assumes coordinates are in decimal degrees (WGS84)
}
}
\section{Advertencias/Warnings}{

\itemize{
\item Si \code{latitude} es mayor que el limite norte de \code{SpatialReference}, el resultado
podria ser vacio
\item La proyeccion podria distorsionar distancias si se usa entre hemisferios
\item El proceso de interseccion podria ser lento con muchos poligonos complejos
/
\item If \code{latitude} is greater than the northern limit of \code{SpatialReference}, the result
could be empty
\item Projection may distort distances if used across hemispheres
\item Intersection process could be slow with many complex polygons
}
}

\examples{
\dontrun{
# Crear datos de ejemplo / Create example data
set.seed(123)
datos_ejemplo <- data.frame(
  longitud = runif(100, -100, -80),
  latitud = runif(100, 15, 30),
  especie = sample(c("Quercus", "Pinus", "Abies"), 100, replace = TRUE),
  altura = runif(100, 5, 25),
  diametro = runif(100, 10, 50)
)

# Crear poligono de referencia (Zona UTM 14N) / Create reference polygon (UTM Zone 14N)
library(sf)
bbox <- st_bbox(c(xmin = -95, xmax = -85, ymin = 20, ymax = 25), crs = 4326)
referencia <- st_as_sfc(bbox) \%>\% st_transform(32614)

# Procesar datos / Process data
datos_espaciales <- CleaningTransformingDfToSf(
  DataFrame = datos_ejemplo,
  SpatialReference = referencia,
  latitude = 18,
  variables = c("especie", "altura", "diametro")
)

# Inspeccionar resultados / Inspect results
class(datos_espaciales)
nrow(datos_espaciales)
table(datos_espaciales$especie, datos_espaciales$espcvld)

# Visualizacion basica / Basic visualization
plot(st_geometry(datos_espaciales), pch = 16,
     col = factor(datos_espaciales$especie))
}

}
\seealso{
\itemize{
\item \code{\link[sf]{st_as_sf}} para conversion a objetos espaciales / for conversion to spatial objects
\item \code{\link[sf]{st_transform}} para transformaciones de CRS / for CRS transformations
\item \code{\link[sf]{st_intersection}} para operaciones de recorte / for clipping operations
}
}
\concept{funciones_espaciales, funciones_limpieza_datos /
spatial_functions, data_cleaning_functions}
\keyword{GIS,}
\keyword{cleaning,}
\keyword{data}
\keyword{datos}
\keyword{datos,}
\keyword{de}
\keyword{espacial,}
\keyword{geoespaciales,}
\keyword{geospatial}
\keyword{limpieza}
\keyword{spatial}
\keyword{transformacion}
\keyword{transformation,}
